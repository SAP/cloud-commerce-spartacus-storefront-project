<div
  class="cx-modal-container"
  [cxFocus]="focusConfig"
  (esc)="dismissModal('Escape pressed',reconsentEvent.errorMessage)"
>
  <div class="cx-modal-content">
    <!-- Modal Header -->
    <ng-container *ngIf="loaded$ | async; else loading">
      <div class="cx-dialog-header modal-header">
        <div class="cx-dialog-title modal-title">
          {{ 'consentManagement.reconsent' | cxTranslate }}
        </div>
        <button
          type="button"
          class="close"
          attr.aria-label="{{ 'consentManagement.closeModal' | cxTranslate }}"
          (click)="dismissModal('Cross click',reconsentEvent.errorMessage)"
        >
          <span aria-hidden="true">
            <cx-icon [type]="iconTypes.CLOSE"></cx-icon>
          </span>
        </button>
      </div>

      <!-- Modal Body -->
      <ng-container *ngIf="templateList$ | async as templateList">
        <div class="cx-dialog-body modal-body">
          <div class="cx-dialog-row">
            <div class="cx-dialog-item col-sm-12 col-md-6">
              <!-- fill your content here -->
              <cx-consent-management-form
                *ngFor="let consentTemplate of templateList"
                [consentTemplate]="consentTemplate"
                (consentChanged)="onConsentChange($event)"
              ></cx-consent-management-form>
              <!-- fill your content here -->
            </div>

            <!-- Separator -->
            <div
              class="
                cx-dialog-separator
                col-sm-12
                d-xs-block d-sm-block d-md-none
              "
            ></div>

            <!-- Actions -->
            <div class="cx-dialog-buttons">
              <a
                [class.disabled]='enableSubmitButton'
                [routerLink]="{ cxRoute: 'login' } | cxUrl"
                (click)="dismissModal('Proceed To Login',reconsentEvent.errorMessage)"
                class="btn btn-primary"
                autofocus
                >{{ 'consentManagement.submitReconsent' | cxTranslate }}</a
              >
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>

  <ng-template #loading>
    <div class="cx-dialog-header modal-header">
      <div class="cx-dialog-title modal-title">
        {{ 'consentManagement.reconsent' | cxTranslate }}
      </div>
      <button
        type="button"
        class="close"
        [attr.aria-label]="'common.close' | cxTranslate"
        (click)="dismissModal('Cross click',reconsentEvent.errorMessage)"
      >
        <span aria-hidden="true">
          <cx-icon [type]="iconTypes.CLOSE"></cx-icon>
        </span>
      </button>
    </div>
    <!-- Modal Body -->
    <div class="cx-dialog-body modal-body">
      <div class="cx-dialog-row">
        <div class="col-sm-12"><cx-spinner></cx-spinner></div>
      </div>
    </div>
  </ng-template>

  <!-- For screen reader purposes (not visual)-->
  <div class="cx-visually-hidden" aria-live="polite" aria-atomic="true">
    {{ 'consentManagement.reconsent' | cxTranslate }}
  </div>
</div>
