<ng-container *ngIf="quoteDetails$ | async as quoteDetails; else loading">
  <div class="cx-header-container">
    <h3 class="cx-header">
      {{ 'quote.commons.id' | cxTranslate }}:
      {{ quoteDetails.code }}
    </h3>
    <h3 class="cx-status">
      {{ 'quote.commons.status' | cxTranslate }}:
      {{ 'quote.states.' + quoteDetails.state | cxTranslate }}
    </h3>
  </div>
  <div class="cx-container">
    <div class="cx-summary-card">
      <ng-container *ngIf="!editMode">
        <cx-card
          [content]="
            getQuoteInformation(quoteDetails.name, quoteDetails.description)
              | async
          "
        ></cx-card>
        <button
          *ngIf="isQuoteInformationEditable(quoteDetails)"
          class="btn btn-link cx-action-link cx-edit-btn"
          (click)="toggleEditMode()"
        >
          <cx-icon [type]="iconTypes.PENCIL"></cx-icon>
        </button>
      </ng-container>
      <cx-quote-details-edit
        *ngIf="editMode"
        [content]="
          getEditQuoteInformation(quoteDetails.name, quoteDetails.description)
        "
        (saveCard)="save(quoteDetails, $event)"
        (cancelCard)="cancel()"
      ></cx-quote-details-edit>
    </div>
    <div class="cx-summary-card">
      <cx-card
        [content]="
          getEstimatedAndDate(quoteDetails, quoteDetails.creationTime | cxDate)
            | async
        "
      ></cx-card>
    </div>
    <div class="cx-summary-card">
      <cx-card
        [content]="
          getUpdate(
            quoteDetails.updatedTime | cxDate,
            quoteDetails.expirationTime | cxDate
          ) | async
        "
      ></cx-card>
    </div>
  </div>
</ng-container>

<ng-template #loading>
  <div class="cx-spinner">
    <cx-spinner></cx-spinner>
  </div>
</ng-template>
