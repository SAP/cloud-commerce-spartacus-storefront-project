<ng-container *ngIf="quoteDetails$ | async as quoteDetailsState">
  <ng-container *ngIf="!quoteDetailsState.loading; else loading">
    <div class="cx-quote-details-header-status">
      <h3 class="quote-details-header">
        {{ 'quote.commons.id' | cxTranslate }}:
        {{ quoteDetailsState?.data?.code }}
      </h3>
      <h3 class="status">
        {{ 'quote.commons.status' | cxTranslate }}:
        {{ 'quote.states.' + quoteDetailsState?.data?.state | cxTranslate }}
      </h3>
    </div>
    <div class="cx-quote-overview">
      <div class="container">
        <div class="cx-summary-card">
          <cx-card
            [content]="
              getQuoteInformation(
                quoteDetailsState?.data?.code,
                quoteDetailsState?.data?.description
              ) | async
            "
            [truncateText]="true"
            [charactersLimit]="30"
          ></cx-card>
        </div>
        <div class="cx-summary-card">
          <cx-card
            [content]="
              getEstimatedAndDate(
                quoteDetailsState?.data?.previousEstimatedTotal?.formattedValue
              ) | async
            "
          ></cx-card>
        </div>
        <div class="cx-summary-card">
          <cx-card
            [content]="
              getUpdate(
                quoteDetailsState?.data?.updatedTime | cxDate,
                quoteDetailsState?.data?.expirationTime | cxDate
              ) | async
            "
          ></cx-card>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #loading>
    <div class="cx-spinner">
      <cx-spinner></cx-spinner>
    </div>
  </ng-template>
</ng-container>
