<div class="cx-conflict-solver-dialog cx-modal-container">
  <div class="cx-modal-content">
    <!-- Modal Header -->
    <div class="cx-dialog-header modal-header">
      <div class="cx-dialog-title modal-title">Here comes the dialog title</div>
      <button
        type="button"
        class="close"
        (click)="dismissModal('Close conflict solver dialog')"
      >
        <span aria-hidden="true">
          <cx-icon [type]="iconTypes.CLOSE"></cx-icon>
        </span>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="cx-dialog-body modal-body">
      <div class="cx-msg-warning">
        <cx-icon [type]="iconTypes.ERROR"></cx-icon>
        {{ 'configurator.header.conflictWarning' | cxTranslate }}
      </div>
      <ng-container *ngIf="routerData$ | async as routerData">
        <ng-container
          *ngIf="
            (conflictGroups$ | async)?.length > 0 &&
            (conflictGroups$ | async) as conflictGroups
          "
        >
          <cx-configurator-conflict-description
            [currentGroup]="conflictGroups[0]"
          ></cx-configurator-conflict-description>
          <div
            class="cx-group-attribute"
            *ngFor="
              let attribute of conflictGroups[0].attributes;
              let indexOfAttribute = index
            "
          >
            <ng-container *ngIf="activeLanguage$ | async as activeLanguage">
              <cx-configurator-conflict-suggestion
                [currentGroup]="conflictGroups[0]"
                [attribute]="attribute"
                [suggestionNumber]="indexOfAttribute"
              ></cx-configurator-conflict-suggestion>
              <cx-configurator-attribute-header
                [attribute]="attribute"
                [owner]="routerData.owner"
                [groupId]="conflictGroups[0].id"
                [groupType]="conflictGroups[0].groupType"
                [isNavigationToGroupEnabled] ="false"
              >
              </cx-configurator-attribute-header>
              <!-- Single Selection Radio Button -->
              <cx-configurator-attribute-radio-button
                *ngIf="
                  attribute.uiType === uiType.RADIOBUTTON ||
                  attribute.uiType === uiType.RADIOBUTTON_ADDITIONAL_INPUT
                "
                [attribute]="attribute"
                [ownerKey]="routerData.owner.key"
                [ownerType]="routerData.owner.type"
                [language]="activeLanguage"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-radio-button>

              <!-- Single Selection Product Bundle -->
              <cx-configurator-attribute-single-selection-bundle
                (selectionChange)="updateConfiguration($event)"
                [attribute]="attribute"
                [ownerKey]="routerData.owner.key"
                *ngIf="attribute.uiType === uiType.RADIOBUTTON_PRODUCT"
              ></cx-configurator-attribute-single-selection-bundle>

              <!-- Multi Selection Product Bundle -->
              <cx-configurator-attribute-multi-selection-bundle
                (selectionChange)="updateConfiguration($event)"
                [attribute]="attribute"
                [ownerKey]="routerData.owner.key"
                *ngIf="attribute.uiType === uiType.CHECKBOXLIST_PRODUCT"
              ></cx-configurator-attribute-multi-selection-bundle>

              <!-- Single Selection Dropdown Product Bundle -->
              <cx-configurator-attribute-single-selection-bundle-dropdown
                *ngIf="attribute.uiType === uiType.DROPDOWN_PRODUCT"
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
                [ownerKey]="routerData.owner.key"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-single-selection-bundle-dropdown>

              <!-- Single Selection Dropdown -->
              <cx-configurator-attribute-drop-down
                *ngIf="
                  attribute.uiType === uiType.DROPDOWN ||
                  attribute.uiType === uiType.DROPDOWN_ADDITIONAL_INPUT
                "
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
                [ownerKey]="routerData.owner.key"
                [ownerType]="routerData.owner.type"
                [language]="activeLanguage"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-drop-down>
              <cx-configurator-attribute-input-field
                *ngIf="attribute.uiType === uiType.STRING"
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
                [ownerType]="routerData.owner.type"
                [ownerKey]="routerData.owner.key"
                (inputChange)="updateConfiguration($event)"
              >
              </cx-configurator-attribute-input-field>

              <cx-configurator-attribute-numeric-input-field
                *ngIf="attribute.uiType === uiType.NUMERIC"
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
                [ownerType]="routerData.owner.type"
                [ownerKey]="routerData.owner.key"
                [language]="activeLanguage"
                (inputChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-numeric-input-field>

              <!-- Multi Selection Checkbox -->
              <cx-configurator-attribute-checkbox-list
                *ngIf="attribute.uiType === uiType.CHECKBOXLIST"
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
                [ownerKey]="routerData.owner.key"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-checkbox-list>
              <cx-configurator-attribute-checkbox
                *ngIf="attribute.uiType === uiType.CHECKBOX"
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
                [ownerKey]="routerData.owner.key"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-checkbox>
              <cx-configurator-attribute-read-only
                *ngIf="attribute.uiType === uiType.READ_ONLY"
                [attribute]="attribute"
                [group]="conflictGroups[0].id"
              ></cx-configurator-attribute-read-only>
              <cx-configurator-attribute-multi-selection-image
                *ngIf="attribute.uiType === uiType.MULTI_SELECTION_IMAGE"
                [attribute]="attribute"
                [ownerKey]="routerData.owner.key"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-multi-selection-image>
              <cx-configurator-attribute-single-selection-image
                *ngIf="attribute.uiType === uiType.SINGLE_SELECTION_IMAGE"
                [attribute]="attribute"
                [ownerKey]="routerData.owner.key"
                (selectionChange)="updateConfiguration($event)"
              ></cx-configurator-attribute-single-selection-image>

              <cx-configurator-attribute-footer
                [attribute]="attribute"
                [owner]="routerData.owner"
                [groupId]="conflictGroups[0].id"
              ></cx-configurator-attribute-footer>
            </ng-container>
          </div>
        </ng-container>
      </ng-container>
    </div>

    <!-- Modal Footer -->
    <div class="cx-modal-footer">
      <!--TODO: here comes 'DONE' button-->
    </div>
  </div>
</div>
