<ng-container *ngIf="ovGroups$ | async as ovGroups; else ghostMenu">
  <span class="cx-title">{{
    'configurator.overviewMenu.title' | cxTranslate
  }}</span>
  <ng-container
    *ngTemplateOutlet="
      groups;
      context: {
        overviewGroups: ovGroups,
        level: 1,
        idPrefix: ''
      }
    "
  ></ng-container>
</ng-container>

<ng-template
  #groups
  let-overviewGroups="overviewGroups"
  let-level="level"
  let-idPrefix="idPrefix"
>
  <ng-container *ngFor="let group of overviewGroups">
    <div [ngClass]="getGroupLevelStyleClasses(level)">
      <span class="cx-visually-hidden">
        {{
          'configurator.a11y.group'
            | cxTranslate
              : {
                  group: group.groupDescription
                }
        }}
      </span>
      <button
        class="cx-menu-item"
        role="tab"
        (click)="navigateToGroup(idPrefix, group.id)"
      >
        {{ group.groupDescription }}
      </button>
      <ng-container *ngIf="group.subGroups?.length > 0">
        <ng-container
          *ngTemplateOutlet="
            groups;
            context: {
              overviewGroups: group.subGroups,
              level: level + 1,
              idPrefix: idPrefix + group.id
            }
          "
        ></ng-container>
      </ng-container>
    </div>
  </ng-container>
</ng-template>

<ng-template #ghostMenu>
  <div class="cx-ghost-group-menu">
    <div *ngFor="let number of [0, 1]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0, 1]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title-sub-l1 cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0, 1, 2]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title-sub-l2 cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title-sub-l3 cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0, 1, 2, 3]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title-sub-l4 cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title-sub-l1 cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0, 1]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title-sub-l2 cx-ghost-item-title"></div>
    </div>
    <div *ngFor="let number of [0]" class="cx-ghost-menu-item">
      <div class="cx-ghost-item-title"></div>
    </div>
  </div>
</ng-template>
