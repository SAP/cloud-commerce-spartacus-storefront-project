<ng-container *ngIf="storeData">
  <div class="store-count">
    {{
      'asm.customer360.maps.storesFound'
        | cxTranslate
          : {
              initial: 1,
              end: storeData.pagination?.pageSize,
              total: storeData.pagination?.totalResults
            }
    }}
  </div>

  <div>
    <div
      class="store-listing-item"
      [class.selected]="selectedStore === store"
      *ngFor="let store of storeData.stores"
      (click)="selectStore(store)"
    >
      <div class="store-listing-item-details">
        <div class="store-listing-item-text">{{ store.displayName }}</div>
        <div class="store-listing-item-text">
          {{ store.address.line1 }}, {{ store.address.line2 }}
        </div>
        <div class="store-listing-item-text">{{ store.address.town }}</div>
      </div>
      <div class="store-listing-item-distance store-listing-item-text">
        {{ store.formattedDistance }}
      </div>
    </div>
  </div>

  <div *ngIf="selectedStore">
    <div class="store-details">
      <img
        *ngIf="selectedStore.storeImages?.[0]"
        [src]="selectedStore.storeImages[0].url"
        width="110px"
        height="110px"
      />
      <div class="store-details-info">
        <div class="bold">{{ selectedStore.displayName }}</div>
        <div>{{ selectedStore.address?.line1 }}</div>
        <div>{{ selectedStore.address?.line2 }}</div>
        <div>{{ selectedStore.address?.town }}</div>
      </div>
    </div>
    <iframe
      *ngIf="!!(source.config$ | async)?.googleMapsApiKey"
      class="store-map"
      height="400"
      loading="lazy"
      allowfullscreen
      referrerpolicy="no-referrer-when-downgrade"
      [src]="googleMapsUrl"
    >
    </iframe>
    <div class="store-openings" *ngIf="selectedStore?.openingHours">
      <div class="store-openings-dates">
        <div
          class="store-openings-date"
          *ngFor="let opening of selectedStore.openingHours.weekDayOpeningList"
        >
          <span class="store-openings-day bold">{{ opening.weekDay }}</span
          >{{ getStoreOpening(opening) | async }}
        </div>
      </div>
      <div class="store-openings-dates">
        <div
          class="store-openings-date"
          *ngFor="
            let opening of selectedStore.openingHours.specialDayOpeningList
          "
        >
          <span class="store-openings-day bold">{{ opening.weekDay }}</span
          >{{ getStoreOpening(opening) | async }}
        </div>
      </div>
      <div class="store-openings-features">
        <div *ngFor="let feature of selectedStore.features?.entry">
          {{ feature.value }}
        </div>
      </div>
    </div>
  </div>
</ng-container>
