<div class="cx-asm-customer-promotion-listing-heading" *ngIf="headerText">
  <h4 class="cx-asm-customer-promotion-listing-heading-text">
    {{ headerText }}
  </h4>
</div>
<div class="message-container">
  <cx-message
    *ngIf="showAlert"
    [text]="'customer360.alertErrorMessage' | cxTranslate"
    [type]="globalMessageType.MSG_TYPE_ERROR"
    (closeMessage)="removeAlert.emit()"
  ></cx-message>
  <cx-message
    *ngIf="showAlertForApplyAction"
    [text]="'customer360.applyActionAlter' | cxTranslate"
    [type]="globalMessageType.MSG_TYPE_ERROR"
    (closeMessage)="removeAlertForApplyAction.emit()"
  ></cx-message>
</div>
<div class="cx-tab-headers" role="tablist" *ngIf="isCustomerCoupon">
  <button [textContent]="'customer360.customerCoupons.availableTab'  | cxTranslate"
  (click)="refreshCustomerCouponList.emit({assignable:true,searchQuery: undefined})">
  </button>
  <button [textContent]="'customer360.customerCoupons.sentTab'  | cxTranslate"
  (click)="refreshCustomerCouponList.emit({assignable:false,searchQuery: undefined})">
  </button>
</div>
<ng-container *ngIf="isCustomerCoupon">
  <hr class="cx-asm-customer-promotion-listing-separator" aria-hidden="true" />
  <div class="form-group search-wrapper">
    <input #searchBox
    class="form-control"
    placeholder="{{ 'customer360.customerCoupons.searchBox' | cxTranslate }}"
    (keydown.enter)="refreshCustomerCouponList.emit({assignable:undefined,searchQuery: searchBox.value}); searchBox.value = ''"/>
    <cx-icon
      [type]="iconTypes.SEARCH"
      role="button"
      (click)="refreshCustomerCouponList.emit({assignable:undefined,searchQuery: searchBox.value}); searchBox.value = ''"
    ></cx-icon>
  </div>
</ng-container>
<table class="cx-asm-customer-promotion-listing">
  <ng-container *ngFor="let entry of entries">
    <tr class="cx-asm-customer-promotion-listing-row">
      <td>
        <tr class="cx-asm-customer-promotion-listing-subheader" tabindex="-1">
          {{
            entry.code
          }}
        </tr>
        <tr class="cx-asm-customer-promotion-listing-description">
          {{
            entry.name
          }}
        </tr>
      </td>
      <td>
        <ng-container *ngIf="!entry.applied">
          <button
            class="cx-asm-customer-promotion-listing-apply-button"
            (click)="apply.emit(entry)"
          >
            {{ applyButtonText }}
          </button>
        </ng-container>
        <ng-container *ngIf="entry.applied">
          <tr class="cx-asm-customer-promotion-listing-action">
            <td>
              <cx-icon class="success" type="SUCCESS" *ngIf="!isCustomerCoupon"></cx-icon>
            </td>
            <td
              *ngIf="showApplyButton&&!isCustomerCoupon"
              class="cx-asm-customer-promotion-listing-applied"
            >
              {{ applied }}
            </td>
            <td
              *ngIf="showRemoveButton&&!isCustomerCoupon"
              class="cx-asm-customer-promotion-listing-action-separator"
            >
              |
            </td>
            <td *ngIf="showRemoveButton">
              <button
                class="cx-asm-customer-promotion-listing-remove-button"
                (click)="remove.emit(entry)"
              >
                {{ removeButtonText }}
              </button>
            </td>
          </tr>
        </ng-container>
      </td>
    </tr>
  </ng-container>
</table>
<hr class="cx-asm-customer-promotion-listing-separator" aria-hidden="true" />
<div
  class="cx-asm-customer-promotion-listing-empty"
  *ngIf="entries?.length === 0 && !showAlert"
>
  {{ emptyStateText }}
</div>
