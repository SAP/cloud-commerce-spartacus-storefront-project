<form [formGroup]="form">
  <div class="form-group" formGroupName="country">
    <ng-container *ngIf="countries$ | async as countries">
      <div *ngIf="countries.length !== 0">
        <label aria-required="true">
          <span class="label-content required">{{
            'units.unitAddressForm.country' | cxTranslate
          }}</span>
          <ng-select
            class="country-select"
            formControlName="isocode"
            [searchable]="true"
            [clearable]="false"
            [items]="countries"
            bindLabel="name"
            bindValue="isocode"
            placeholder="{{ 'units.unitAddressForm.selectOne' | cxTranslate }}"
            (change)="countrySelected($event)"
          >
          </ng-select>
          <cx-form-errors
            [control]="form.get('country.isocode')"
          ></cx-form-errors>
        </label>
      </div>
    </ng-container>
  </div>

  <div class="form-group" *ngIf="titles$ | async as titles">
    <div *ngIf="titles.length !== 0">
      <label aria-required="true">
        <span class="label-content required">{{
          'units.unitAddressForm.title' | cxTranslate
        }}</span>
        <ng-select
          formControlName="titleCode"
          [searchable]="false"
          [clearable]="false"
          [items]="titles"
          bindLabel="name"
          bindValue="code"
          placeholder="{{ 'units.unitAddressForm.selectOne' | cxTranslate }}"
        >
        </ng-select>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label>
      <span class="label-content required">{{
        'units.unitAddressForm.firstName.label' | cxTranslate
      }}</span>
      <input
        class="form-control"
        type="text"
        placeholder="{{
          'units.unitAddressForm.firstName.placeholder' | cxTranslate
        }}"
        formControlName="firstName"
      />
      <cx-form-errors [control]="form.get('firstName')"></cx-form-errors>
    </label>
  </div>
  <div class="form-group">
    <label>
      <span class="label-content required">{{
        'units.unitAddressForm.lastName.label' | cxTranslate
      }}</span>
      <input
        type="text"
        class="form-control"
        placeholder="{{
          'units.unitAddressForm.lastName.placeholder' | cxTranslate
        }}"
        formControlName="lastName"
      />
      <cx-form-errors [control]="form.get('lastName')"></cx-form-errors>
    </label>
  </div>
  <div class="form-group">
    <label>
      <span class="label-content required">{{
        'units.unitAddressForm.address1' | cxTranslate
      }}</span>
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'units.unitAddressForm.streetAddress' | cxTranslate }}"
        formControlName="line1"
      />
      <cx-form-errors [control]="form.get('line1')"></cx-form-errors>
    </label>
  </div>
  <div class="form-group">
    <label>
      <span class="label-content">{{
        'units.unitAddressForm.address2' | cxTranslate
      }}</span>
      <input
        type="text"
        class="form-control"
        placeholder="{{ 'units.unitAddressForm.aptSuite' | cxTranslate }}"
        formControlName="line2"
      />
    </label>
  </div>
  <div class="form-group">
    <label>
      <span class="label-content required">{{
        'units.unitAddressForm.city.label' | cxTranslate
      }}</span>
      <input
        type="text"
        class="form-control"
        placeholder="{{
          'units.unitAddressForm.city.placeholder' | cxTranslate
        }}"
        formControlName="town"
      />
      <cx-form-errors [control]="form.get('town')"></cx-form-errors>
    </label>
  </div>
  <div class="form-group">
    <label>
      <span class="label-content required">{{
        'units.unitAddressForm.zipCode.label' | cxTranslate
      }}</span>
      <input
        type="text"
        class="form-control"
        placeholder="{{
          'units.unitAddressForm.zipCode.placeholder' | cxTranslate
        }}"
        formControlName="postalCode"
      />
      <cx-form-errors [control]="form.get('postalCode')"></cx-form-errors>
    </label>
  </div>
  <ng-container *ngIf="regions$ | async as regions" formGroupName="region">
    <ng-container *ngIf="regions.length !== 0">
      <div class="form-group col-md-6">
        <label aria-required="true">
          <span class="label-content required">{{
            'units.unitAddressForm.state' | cxTranslate
          }}</span>
          <ng-select
            class="region-select"
            formControlName="isocode"
            [searchable]="true"
            [clearable]="false"
            [items]="regions"
            bindLabel="{{ regions[0].name ? 'name' : 'isocode' }}"
            bindValue="{{ regions[0].name ? 'isocode' : 'region' }}"
            placeholder="{{ 'units.unitAddressForm.selectOne' | cxTranslate }}"
          >
          </ng-select>
          <cx-form-errors
            [control]="form.get('region.isocode')"
          ></cx-form-errors>
        </label>
      </div>
    </ng-container>
  </ng-container>
  <div class="form-group">
    <label>
      <span class="label-content">{{
        'units.unitAddressForm.phoneNumber.label' | cxTranslate
      }}</span>
      <input
        type="text"
        class="form-control"
        placeholder="{{
          'units.unitAddressForm.phoneNumber.placeholder' | cxTranslate
        }}"
        formControlName="phone"
      />
    </label>
  </div>
</form>
