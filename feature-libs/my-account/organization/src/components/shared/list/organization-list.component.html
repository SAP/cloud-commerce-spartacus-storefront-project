<ng-template [cxOutletRef]="'table.' + type + '.data.name'" let-model>
  <a [routerLink]="{ cxRoute: type + 'Details', params: model } | cxUrl">
    <span class="label">
      {{ model.name }}
    </span>
  </a>
</ng-template>

<ng-template [cxOutletRef]="'table.' + type + '.data.suffix'" let-model>
  <a [routerLink]="{ cxRoute: type + 'Details', params: model } | cxUrl">
    <span class="label">
      <cx-icon type="CARET_RIGHT"></cx-icon>
    </span>
  </a>
</ng-template>

<ng-template [cxOutletRef]="'table.' + type + '.data.active'" let-model>
  <a [routerLink]="{ cxRoute: type + 'Details', params: model } | cxUrl">
    <span class="label">
      {{
        (model.active ? 'organization.enabled' : 'organization.disabled')
          | cxTranslate
      }}
    </span>
  </a>
</ng-template>

<ng-template [cxOutletRef]="'table.' + type + '.data.unit'" let-model>
  <a [routerLink]="{ cxRoute: type + 'Details', params: model } | cxUrl">
    <span class="label">
      {{ model.unit?.name }}
    </span>
  </a>
</ng-template>

<ng-template [cxOutletRef]="'table.' + type + '.data.currency'" let-model>
  <a [routerLink]="{ cxRoute: type + 'Details', params: model } | cxUrl">
    <span class="label">
      {{ model.currency }}
    </span>
  </a>
</ng-template>

<cx-split-view [hideMode]="false">
  <cx-view>
    <ng-container *ngIf="dataTable; else emptyList">
      <h3>
        {{
          type + '.header'
            | cxTranslate: { count: dataTable.pagination?.totalResults }
        }}
      </h3>

      <div class="actions">
        <div>
          <ng-select
            *ngIf="dataTable.pagination?.sort"
            [searchable]="false"
            [clearable]="false"
            (change)="sort(dataTable.pagination, $event)"
            [tabIndex]="0"
            [(ngModel)]="dataTable.pagination.sort"
          >
            <ng-option *ngFor="let sort of dataTable.sorts" [value]="sort.code">
              {{ dataTable.structure.type + '.' + sort.code | cxTranslate }}
            </ng-option>
          </ng-select>
        </div>
        <button
          class="button primary gi"
          [routerLink]="{ cxRoute: type + 'Create' } | cxUrl"
          routerLinkActive="disabled"
        >
          {{ 'organization.add' | cxTranslate }}
        </button>
      </div>

      <cx-table
        *ngIf="dataTable; else emptyList"
        [dataset]="dataTable"
        (sortEvent)="sort(dataTable.pagination, $event)"
        [suffix]="true"
        [activeRow]="activeRow"
      >
      </cx-table>

      <div class="footer">
        <cx-pagination
          *ngIf="dataTable.pagination"
          [pagination]="dataTable.pagination"
          (viewPageEvent)="viewPage(dataTable.pagination, $event)"
        ></cx-pagination>
      </div>
    </ng-container>

    <ng-template #emptyList>
      <p class="instruction is-empty">
        {{ 'organization.messages.emptyList' | cxTranslate }}
      </p>
    </ng-template>
  </cx-view>

  <!-- nested split views are rendered inside child routes -->
  <router-outlet></router-outlet>
</cx-split-view>
