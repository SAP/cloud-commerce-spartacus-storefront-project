<cx-view #view *ngIf="code$ | async as code">
  <ng-container *ngIf="dataTable$ | async as dataTable; else emptyList">
    <h3>
      <a
        class="link"
        [routerLink]="
          { cxRoute: 'costCenterDetails', params: { code: code } } | cxUrl
        "
        (click)="view.toggle()"
      >
        <cx-icon type="CARET_LEFT"></cx-icon>
        {{ 'organization.back' | cxTranslate }}
      </a>
      <span>{{
        'costCenter.budget.header'
          | cxTranslate: { count: dataTable.pagination?.totalResults }
      }}</span>
    </h3>

    <div class="actions">
      <a
        class="link"
        [routerLink]="
          {
            cxRoute: 'costCenterAssignBudgets',
            params: { code: code }
          } | cxUrl
        "
      >
        {{ 'costCenter.budget.assign' | cxTranslate }}
      </a>
    </div>

    <cx-td-link
      outlet="table.costCenterBudgets.data.name"
      cxRoute="costCenterDetails"
      prop="name"
    >
    </cx-td-link>

    <ng-template
      [cxOutletRef]="'table.costCenterBudgets.data.active'"
      let-model
    >
      <a [routerLink]="{ cxRoute: 'costCenterBudgets', params: model } | cxUrl">
        <span class="label">
          {{
            (model.active ? 'organization.enabled' : 'organization.disabled')
              | cxTranslate
          }}
        </span>
      </a>
    </ng-template>

    <cx-table *ngIf="dataTable; else emptyList" [dataset]="dataTable">
    </cx-table>

    <!--  -->
    <!-- 



  <ng-template cxOutletRef="table.costCenterBudgets.data.summary" let-model>
    <h3>{{ model.name }}</h3>
    <small
      >{{ model.code }} • {{ model.budget }} {{ model.currency.isocode }} •
      {{ model.startDate | cxDate }} - {{ model.endDate | cxDate }}
    </small>
  </ng-template>

  <ng-template cxOutletRef="table.costCenterBudgets.data.unassign" let-model>
    <button class="button" (click)="unassign(model)">
      <cx-icon type="CLOSE"></cx-icon>
    </button>
  </ng-template>

  <ng-template cxOutletRef="table.costCenterBudgets.data.link" let-model>
    <a
      class="link"
      [routerLink]="
        {
          cxRoute: 'budgetDetails',
          params: { code: model.code }
        } | cxUrl
      "
    >
      <cx-icon class="open-out" type="LINK_OUT"></cx-icon>
    </a>
  </ng-template> -->
  </ng-container>
</cx-view>

<router-outlet></router-outlet>

<ng-template #emptyList>
  <p class="instruction is-empty">
    {{ 'organization.messages.emptyList' | cxTranslate }}
  </p>
</ng-template>
