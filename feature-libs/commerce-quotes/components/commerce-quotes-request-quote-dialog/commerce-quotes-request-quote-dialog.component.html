<div
  #dialog
  class="cx-modal-container"
  [cxFocus]="focusConfig"
  (esc)="dismissModal('Escape clicked')"
>
  <!-- Modal Header -->

  <div class="cx-modal-content">
    <div class="cx-dialog-header modal-header">
      <div class="cx-dialog-title modal-title">
        {{ 'quote.requestDialog.title' | cxTranslate }}
      </div>
      <button
        type="button"
        class="close"
        [attr.aria-label]="'common.close' | cxTranslate"
        (click)="dismissModal('Cross click')"
      >
        <span aria-hidden="true">
          <cx-icon [type]="iconTypes.CLOSE"></cx-icon>
        </span>
      </button>
    </div>
    <!-- Modal Body -->
    <div
      class="cx-dialog-body modal-body"
      *ngIf="!(requestInProgress$ | async); else inProgress"
    >
      <div class="cx-dialog-row">
        <div class="cx-dialog-item">
          <form [formGroup]="form">
            <label>
              <span class="label-content">{{
                'quote.requestDialog.form.name.label' | cxTranslate
              }}</span>
              <input
                required="true"
                type="text"
                name="name"
                formControlName="name"
                placeholder="{{
                  'quote.requestDialog.form.name.placeholder'
                    | cxTranslate
                }}"
                class="form-control"
              />
              <cx-form-errors [control]="form.get('name')"></cx-form-errors>
            </label>
            <label>
              <span class="label-content">{{
                'quote.requestDialog.form.description.label'
                  | cxTranslate
              }}</span>
              <input
                type="text"
                name="description"
                formControlName="description"
                placeholder="{{
                  'quote.requestDialog.form.description.placeholder'
                    | cxTranslate
                }}"
                class="form-control"
              />
              <cx-form-errors
                [control]="form.get('description')"
              ></cx-form-errors>
            </label>
            <label>
              <span class="label-content">{{
                'quote.requestDialog.form.comment.label' | cxTranslate
              }}</span>
              <textarea
                required="true"
                type="text"
                name="comment"
                formControlName="comment"
                placeholder="{{
                  'quote.requestDialog.form.comment.placeholder'
                    | cxTranslate
                }}"
                class="form-control"
              ></textarea>
              <cx-form-errors [control]="form.get('comment')"></cx-form-errors>
            </label>
          </form>
          <div class="notes">
            <p>{{ 'quote.requestDialog.form.note' | cxTranslate }}</p>
            <p *ngIf="minRequestInitiationValue">
              {{
                'quote.requestDialog.form.minRequestInitiationNote'
                  | cxTranslate: { minValue: minRequestInitiationValue }
              }}
            </p>
            <p>
              {{
                'quote.requestDialog.form.requestSubmitNote'
                  | cxTranslate
              }}
            </p>
          </div>

          <div class="cx-dialog-buttons">
            <button
              class="btn btn-action"
              (click)="onSubmit(true)"
              [disabled]="form.disabled"
            >
              {{
                'quote.requestDialog.form.continueToEdit' | cxTranslate
              }}
            </button>
            <button
              class="btn btn-primary"
              (click)="onSubmit()"
              [disabled]="form.disabled"
            >
              {{ 'quote.requestDialog.form.request' | cxTranslate }}
            </button>
          </div>
        </div>
      </div>
    </div>
    <ng-template #inProgress>
      <div class="cx-spinner">
        <cx-spinner></cx-spinner>
      </div>
    </ng-template>
  </div>
</div>
