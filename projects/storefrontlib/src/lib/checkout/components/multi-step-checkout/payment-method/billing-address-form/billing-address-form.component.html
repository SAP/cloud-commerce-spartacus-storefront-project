<div class="cx-billing-address-form container">
  <div [formGroup]="billingAddress">
    <div class="form-group">
      <ng-container *ngIf="(titles$ | async) as titles">
        <div *ngIf="titles.length !== 0">
          <label aria-required="true">
            <span class="label-content required">Title</span>
            <ng-select
              [searchable]="false"
              [clearable]="false"
              [items]="titles"
              bindLabel="name"
              bindValue="code"
              placeholder="Select Title..."
              (change)="titleSelected($event)"
            >
            </ng-select>
          </label>
        </div>
      </ng-container>
    </div>
    <div class="form-group">
      <label>
        <span class="label-content required">First name</span>
        <input
          class="form-control"
          type="text"
          required
          placeholder="First Name"
          formControlName="firstName"
        />
      </label>
    </div>
    <div class="form-group">
      <label>
        <span class="label-content required">Last name</span>
        <input
          type="text"
          class="form-control"
          required
          placeholder="Last Name"
          formControlName="lastName"
        />
      </label>
    </div>
    <div class="form-group">
      <label>
        <span class="label-content required">Address 1</span>
        <input
          type="text"
          class="form-control"
          required
          placeholder="Street Address"
          formControlName="line1"
        />
      </label>
    </div>
    <div class="form-group">
      <label>
        <span class="label-content">Address 2 (optional)</span>
        <input
          type="text"
          class="form-control"
          placeholder="Apt, Suite"
          formControlName="line2"
        />
      </label>
    </div>
    <div class="form-group">
      <ng-container *ngIf="(countries$ | async) as countries">
        <div *ngIf="countries.length !== 0">
          <label aria-required="true">
            <span class="label-content required">Country</span>
            <ng-select
              [searchable]="false"
              [clearable]="false"
              [items]="countries"
              bindLabel="name"
              bindValue="isocode"
              placeholder="Select One..."
              (change)="countrySelected($event)"
            >
            </ng-select>
          </label>
        </div>
      </ng-container>
    </div>
    <div class="row">
      <div class="form-group col-md-6">
        <label>
          <span class="label-content required">City</span>
          <input
            type="text"
            class="form-control"
            required
            placeholder="City"
            formControlName="town"
          />
        </label>
      </div>
      <ng-container *ngIf="(regions$ | async) as regions">
        <div class="form-group col-md-6" *ngIf="regions.length !== 0">
          <label aria-required="true">
            <span class="label-content required">State</span>
            <ng-container *ngIf="regions[0].name">
              <ng-select
                [searchable]="false"
                [clearable]="false"
                [items]="regions"
                bindLabel="name"
                bindValue="region"
                placeholder="Select One..."
                (change)="regionSelected($event)"
              >
              </ng-select>
            </ng-container>
            <ng-container *ngIf="!regions[0].name">
              <ng-select
                [searchable]="false"
                [clearable]="false"
                [items]="regions"
                bindLabel="isocode"
                bindValue="region"
                placeholder="Select One..."
                (change)="regionSelected($event)"
              >
              </ng-select>
            </ng-container>
          </label>
        </div>
      </ng-container>
      <div class="form-group col-md-6">
        <label>
          <span class="label-content required">Zip code</span>
          <input
            type="text"
            class="form-control"
            required
            placeholder="Postal Code/Zip"
            formControlName="postalCode"
          />
        </label>
      </div>
    </div>
    <div class="form-group">
      <label>
        <span class="label-content">Phone number (optional)</span>
        <input
          type="text"
          class="form-control"
          placeholder="(555) 555 - 0123"
          formControlName="phone"
        />
      </label>
    </div>
  </div>
</div>
