<mat-menu #userMenu="matMenu" x-position="before">
  <button mat-menu-item (click)="logout()"> Logout </button>
</mat-menu>

<mat-menu #guestMenu="matMenu" x-position="before">
  <a mat-menu-item routerLink="login">Sign in</a>
  <a mat-menu-item routerLink="register">Register</a>
</mat-menu>

<ng-container *ngIf="user$ | async as user">
  <button *ngIf="user?.name" mat-button color="primary" [matMenuTriggerFor]="userMenu">
    Welcome {{ user.name }}
    <mat-icon>expand_more</mat-icon>
  </button>

  <button *ngIf="!user?.name" mat-icon-button color="primary" [matMenuTriggerFor]="guestMenu">
    <mat-icon>person</mat-icon>
  </button>
</ng-container>
