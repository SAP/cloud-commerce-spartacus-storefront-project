<section class="cx-page__section container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="cx-section">
        <h1 class="cx-section__title">
          {{ 'register.label.createAccount' | cxTranslate }}
        </h1>
        <form [formGroup]="userRegistrationForm">
          <div class="form-group">
            <label>
              <span class="label-content">{{
                'register.label.title' | cxTranslate
              }}</span>
              <select formControlName="titleCode" class="form-control">
                <option selected value="" disabled>{{
                  'register.placeholder.selectTitle' | cxTranslate
                }}</option>
                <option
                  *ngFor="let title of (titles$ | async)"
                  [value]="title.code"
                  >{{ title.name }}</option
                >
              </select>
            </label>
          </div>

          <div class="form-group">
            <label>
              <span class="label-content">{{
                'register.label.firstName' | cxTranslate
              }}</span>
              <input
                class="form-control"
                type="text"
                name="firstname"
                placeholder="{{
                  'register.placeholder.firstName' | cxTranslate
                }}"
                formControlName="firstName"
              />
            </label>
          </div>

          <div class="form-group">
            <label>
              <span class="label-content">{{
                'register.label.lastName' | cxTranslate
              }}</span>
              <input
                class="form-control"
                type="text"
                name="lastname"
                placeholder="{{
                  'register.placeholder.lastName' | cxTranslate
                }}"
                formControlName="lastName"
              />
            </label>
          </div>

          <div class="form-group">
            <label>
              <span class="label-content">{{
                'register.label.emailAddress' | cxTranslate
              }}</span>
              <input
                class="form-control"
                [class.is-invalid]="
                  (userRegistrationForm.get('email').errors?.email ||
                    userRegistrationForm.get('email').errors?.InvalidEmail) &&
                  userRegistrationForm.get('email').dirty
                "
                type="email"
                name="email"
                placeholder="{{
                  'register.placeholder.emailAddress' | cxTranslate
                }}"
                formControlName="email"
              />
            </label>
          </div>

          <div class="form-group">
            <label>
              <span class="label-content">{{
                'register.label.password' | cxTranslate
              }}</span>
              <input
                class="form-control"
                [class.is-invalid]="
                  userRegistrationForm.get('password').invalid &&
                  userRegistrationForm.get('password').dirty
                "
                type="password"
                name="password"
                placeholder="{{
                  'register.placeholder.password' | cxTranslate
                }}"
                formControlName="password"
              />
              <div
                class="invalid-feedback"
                *ngIf="
                  userRegistrationForm.get('password').invalid &&
                  userRegistrationForm.get('password').dirty
                "
              >
                <span>{{
                  'register.validation.passwordMinRequirements' | cxTranslate
                }}</span>
              </div>
            </label>
          </div>

          <div class="form-group">
            <label>
              <span class="label-content">{{
                'register.label.confirmPassword' | cxTranslate
              }}</span>
              <input
                class="form-control"
                [class.is-invalid]="
                  userRegistrationForm.get('password').value !==
                  userRegistrationForm.get('passwordconf').value
                "
                type="password"
                name="confirmpassword"
                placeholder="{{
                  'register.placeholder.confirmPassword' | cxTranslate
                }}"
                formControlName="passwordconf"
              />
              <div
                class="invalid-feedback"
                *ngIf="
                  userRegistrationForm.get('password').value !==
                    userRegistrationForm.get('passwordconf').value &&
                  userRegistrationForm.get('passwordconf').value
                "
              >
                <span>{{
                  'register.validation.bothPasswordMustMatch' | cxTranslate
                }}</span>
              </div>
            </label>
          </div>

          <div class="form-group">
            <div class="form-check">
              <label>
                <input
                  type="checkbox"
                  name="newsletter"
                  class="form-check-input"
                  formControlName="newsletter"
                />
                <span class="form-check-label">
                  {{ 'register.label.emailMarketing' | cxTranslate }}
                </span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <div class="form-check">
              <label>
                <input
                  type="checkbox"
                  name="termsandconditions"
                  formControlName="termsandconditions"
                />
                <span class="form-check-label">
                  {{ 'register.label.confirmThatRead' | cxTranslate }}
                  <a
                    [routerLink]="
                      { route: ['termsAndConditions'] } | cxTranslateUrl
                    "
                    target="_blank"
                  >
                    {{ 'register.action.termsAndConditions' | cxTranslate }}
                  </a>
                </span>
              </label>
            </div>
          </div>
          <button
            type="submit"
            (click)="submit()"
            [disabled]="userRegistrationForm.invalid"
            class="btn btn-block btn-primary"
          >
            {{ 'register.action.register' | cxTranslate }}
          </button>
          <a
            class="cx-login-link btn-link"
            [routerLink]="{ route: ['login'] } | cxTranslateUrl"
            >{{ 'register.action.signIn' | cxTranslate }}</a
          >
        </form>
      </div>
    </div>
  </div>
</section>
