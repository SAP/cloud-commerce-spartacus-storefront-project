<div class="cx-navigation">
  <ng-container *ngFor="let child of node?.children">
    <ng-container *ngTemplateOutlet="nav; context: { node: child }">
    </ng-container>
  </ng-container>
</div>

<ng-template #nav let-node="node">
  <nav [class.has-childs]="node.children?.length > 0">
    <cx-generic-link [url]="node.url">
      {{ node.title }}
      <cx-icon
        *ngIf="node.children?.length > 0"
        [type]="iconTypes.CARET_DOWN"
        class="small"
      ></cx-icon>
    </cx-generic-link>

    <div
      class="wrapper"
      *ngIf="node.children?.length > 0"
      [attr.childs]="node.children?.length"
    >
      <div class="childs">
        <ng-container *ngFor="let child of node.children">
          <ng-container *ngTemplateOutlet="nav; context: { node: child }">
          </ng-container>
        </ng-container>
      </div>
    </div>
  </nav>
</ng-template>
