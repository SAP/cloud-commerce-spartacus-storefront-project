<div *ngIf="data$ | async as data" class="cx-suggested-addresses-dialog">
  <div class="cx-suggested-addresses-container">
    <div class="cx-suggested-addresses-header">
      <div class="cx-suggested-addresses-title">
        {{ 'addressSuggestion.verifyYourAddress' | cxTranslate }}
      </div>
      <button
        type="button"
        class="close"
        [attr.aria-label]="'common.close' | cxTranslate"
        (click)="closeModal('Cross click')"
      >
        <span aria-hidden="true">
          <cx-icon [type]="iconTypes.CLOSE"></cx-icon>
        </span>
      </button>
    </div>
    <div class="cx-suggested-addresses-body" ngForm>
      <div class="cx-dialog-info col-md-12">
        <p>
          {{ 'addressSuggestion.ensureAccuracySuggestChange' | cxTranslate }}
          {{ 'addressSuggestion.chooseAddressToUse' | cxTranslate }}
        </p>
      </div>

      <div class="cx-dialog-options col-md-12">
        <div
          class="form-check"
          *ngFor="
            let suggestedAddress of data.suggestedAddresses;
            let i = index
          "
        >
          <input
            class="form-check-input"
            type="radio"
            name="selectedAddress"
            [(ngModel)]="selectedAddress"
            [value]="suggestedAddress"
            [id]="'suggested-addresses--suggested-' + i"
          />
          <label
            class="form-check-label cx-dialog-label"
            [for]="'suggested-addresses--suggested-' + i"
          >
            {{ 'addressSuggestion.suggestedAddress' | cxTranslate }}
            {{ data.suggestedAddresses.length > 1 ? i + 1 : null }}
          </label>
          <div class="cx-dialog-suggested">
            {{ suggestedAddress?.firstName }}
            {{ suggestedAddress?.lastName }}<br />
            {{ suggestedAddress?.line1 }}<br />
            <span>{{ suggestedAddress?.line2 }}</span
            ><br />
            {{ suggestedAddress?.town }}
            {{ suggestedAddress?.region?.isocode }}<br />
            {{ suggestedAddress?.postalCode }}
          </div>
        </div>
        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="selectedAddress"
            [(ngModel)]="selectedAddress"
            [value]="data.enteredAddress"
            id="suggested-addresses--entered"
          />
          <label
            class="form-check-label cx-dialog-label"
            for="suggested-addresses--entered"
          >
            {{ 'addressSuggestion.enteredAddress' | cxTranslate }}
          </label>
          <div class="cx-dialog-entered">
            {{ data.enteredAddress?.firstName }}
            {{ data.enteredAddress?.lastName }}<br />
            {{ data.enteredAddress?.line1 }}<br />
            <span>{{ data.enteredAddress?.line2 }}</span
            ><br />
            {{ data.enteredAddress?.town }}
            {{ data.enteredAddress?.region?.isocode }}<br />
            {{ data.enteredAddress?.postalCode }}
          </div>
        </div>
      </div>
    </div>
    <div class="cx-suggested-addresses-footer">
      <div class="cx-dialog-actions col-sm-12 col-md-6 offset-md-6">
        <button
          class="btn btn-secondary cx-dialog-buttons"
          (click)="closeModal('Edit address')"
        >
          {{ 'addressSuggestion.editAddress' | cxTranslate }}
        </button>
        <button
          cxAutoFocus
          class="btn btn-primary cx-dialog-buttons"
          (click)="closeModal(selectedAddress)"
        >
          {{ 'addressSuggestion.saveAddress' | cxTranslate }}
        </button>
      </div>
    </div>
  </div>
</div>
